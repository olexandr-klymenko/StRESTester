[
  {"async_rest_call": {
    "name": "'Create User'",
    "method": "post",
    "url": "auth_url",
    "path": "'/users/'",
    "swagger": "auth_swagger",
    "swagger_path": "'/users/'",
    "data": "{'login': username, 'password': password}"
  }},

  {"async_rest_call": [{
    "name": "'Get Auth Token'",
    "method": "post",
    "url": "auth_url",
    "path": "'/tokens/'",
    "swagger": "auth_swagger",
    "swagger_path": "'/tokens/'",
    "data": "{'login': username, 'password': password}"
  },
    "auth_token"]},
  {
    "async_rest_call": [{
      "name": "'Login'",
      "method": "post",
      "url": "api_url",
      "path": "'/users/login/'",
      "swagger": "api_users_swagger",
      "swagger_path": "'/login/'",
      "data": "auth_token",
      "headers": "{'content-type': 'application/json'}"
    },
      "jwt_token"
    ]
  },
  {
    "get_value": [{
      "info": "jwt_token",
      "key": "token"
    },
      "jwt_token"
    ]
  },
  {
    "async_rest_call": [{
      "name": "'Create Profile'",
      "method": "post",
      "url": "api_url",
      "path": "'/users/profile/'",
      "swagger": "api_users_swagger",
      "swagger_path": "'/profile/'",
      "data": "{'nickname': username}",
      "headers": "{'content-type': 'application/json', 'Authorization': 'Bearer: %s' % jwt_token}",
      "raw": "True"
    },
      "user_info"
    ]
  },
  {
    "get_value": [{
      "info": "user_info",
      "key": "profile"
    },
      "profile_info"
    ]
  },
  {
    "get_value": [{
      "info": "profile_info",
      "key": "profile_id"
    },
      "profile_id"
    ]
  },
  {
    "get_value": [{
      "info": "profile_info",
      "key": "user_id"
    },
      "user_id"
    ]
  },
  {"async_rest_call": {
    "name": "'Delete profile'",
    "method": "delete",
    "url": "api_url",
    "path": "'/admin/profiles/'",
    "swagger": "api_admin_swagger",
    "swagger_path": "'/profiles/'",
    "params": "{'profile_id': profile_id, 'user_id': user_id}"
    }
  },

  {"async_rest_call": {
    "name": "'Delete User'",
    "method": "delete",
    "url": "auth_url",
    "path": "'/users/%s' % username",
    "swagger": "auth_swagger",
    "swagger_path": "'/users/{login}'"
  }}
]
